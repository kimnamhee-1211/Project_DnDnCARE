<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link th:href="@{css/enroll.css}" rel="stylesheet" type="text/css"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
	<div class="navbar" th:replace="~{common/navbar.html :: navbar}"></div>
	<main class="inner-content d-flex justify-content-center">
		<form action="enrollPatient.me" method="post" id="enrollForm">
			<input type="hidden" name="memberNo" th:value="${enrollmember.memberNo}">
			<div class="login-wrap">
				<h1 class="h3 mb-3 fw-bold mb-5 text-center">회원가입</h1>
				<h5 class="h5 mb-1 fw-bold mb-1">아래 내용은 간병이 필요한 분의 정보 입력 사항입니다.</h5>
				<h5 class="h5 mb-3 fw-bold mb-5">이를 바탕으로 보다 정확한 매칭 서비스를 제공할 수 있습니다.</h5>
				<div class="login-input">	
					
					
					<p class="info" style="min-width:550px;">간병이 필요한 분의 성함을 입력해주세요.</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<input type="text" class="form-control" id="nameInput" name="ptName">
						<label for="nameInput">성함</label>
					</div>
					
					<p class="info">성별을 선택해 주세요.</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="radio" name="ptGender" id="menInput" th:value="M" checked>
						  <label class="btn-outline" for="menInput">남성</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="radio" name="ptGender" id="womenInput" th:value="F">
						  <label class="btn-outline" for="womenInput">여성</label>
						</div>
					</div>
					
					<p class="info">생년월일을 입력해주세요.</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<input type="date" class="form-control inputCheck" id="ageInput" name="ptAge">
						<label for="ageInput" id="ageInputLabel">생년월일</label>
					</div>

					
					<p class="info">원하는 서비스를 선택해주세요.(1~2개)</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<div class="form-check form-check-inline">
						  <input class="btn-check checkService" type="checkbox" value="1" name="memberInfo" id="expS1Input" checked>
						  <label class="btn-outline" for="expS1Input">병원돌봄</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check checkService" type="checkbox" value="2" name="memberInfo" id="expS2Input">
						  <label class="btn-outline" for="expS2Input">가정돌봄</label>
						</div>
					</div>		
					
					
					<p class="info">돌봄 서비스를 진행할 정확한 주소를 입력해주세요.</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-1" >
						<button type="button" onclick="sample4_execDaumPostcode()" class="btn-outline" style="border:none;">주소 검색</button>
					</div>
					<div class="form-floating mb-1" >
   						<input type="text" class="form-control inputCheck" id="sample4_postcode" name="postcode">
   						<label for="sample4_postcod">우편번호</label>
					</div>
					<div class="form-floating mb-1">
						<input type="text" class="form-control inputCheck" id="sample4_roadAddress" name="roadAddress">
						<label for="sample4_roadAddress">도로명주소</label>
					</div>
					<div class="form-floating mb-5">
						<input type="text" class="form-control inputCheck" id="sample4_detailAddress" name="detailAddress">
						<label for="sample4_detailAddress">상세주소</label>						
					</div>	
					
					<p class="info">거동 상태를 선택해 주세요.</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="radio" name="memberInfo" id="D1Input"  value="40" checked>
						  <label class="btn-outline" for="D1Input">자가 보행</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="radio" name="memberInfo" id="D2Input"  value="41">
						  <label class="btn-outline" for="D2Input">거동 불가</label>
						</div>
					</div>
					
					
					<p class="info">어떤 질환이 있는지 선택해주세요.(0~16개)</p>
					<div class="form-floating mb-5">
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="21" name="memberInfo" id="expD1Input">
						  <label class="btn-outline sm" for="expD1Input">치매</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="22" name="memberInfo" id="expD2Input">
						  <label class="btn-outline sm" for="expD2Input">섬망</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="23" name="memberInfo" id="expD3Input">
						  <label class="btn-outline sm" for="expD3Input">욕창</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="24" name="memberInfo" id="expD4Input">
						  <label class="btn-outline sm" for="expD4Input">하반신 마비</label>
						</div>
						<br>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="25" name="memberInfo" id="expD5Input">
						  <label class="btn-outline sm" for="expD5Input">전신마비</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="26" name="memberInfo" id="expD6Input">
						  <label class="btn-outline sm" for="expD6Input">와상환자</label>
						</div>						
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="27" name="memberInfo" id="expD7Input">
						  <label class="btn-outline sm" for="expD7Input">기저귀 케어</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="28" name="memberInfo" id="expD8Input">
						  <label class="btn-outline sm" for="expD8Input">의식 없음</label>
						</div>
						<br>
						<div class="form-check form-check-inline">
						  <input class="btn-check" type="checkbox" value="29" name="memberInfo" id="expD9Input">
						  <label class="btn-outline sm" for="expD9Input">석션</label>
						</div>						
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="30" name="memberInfo" id="expD10Input">
						  <label class="btn-outline sm" for="expD10Input">피딩</label>
						</div>						
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="31" name="memberInfo" id="expD11Input">
						  <label class="btn-outline sm" for="expD11Input">소변줄</label>
						</div>						
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="32" name="memberInfo" id="expD12Input">
						  <label class="btn-outline sm" for="expD12Input">장루</label>
						</div>			
						<br>			
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="33" name="memberInfo" id="expD13Input">
						  <label class="btn-outline sm" for="expD13Input">투석</label>
						</div>						
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="34" name="memberInfo" id="expD14Input">
						  <label class="btn-outline sm" for="expD14Input">전염성 질환</label>
						</div>						
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="35" name="memberInfo" id="expD15Input">
						  <label class="btn-outline sm" for="expD15Input">파킨슨</label>
						</div>
						<div class="form-check form-check-inline">
						     <input class="btn-check" type="checkbox" value="36" name="memberInfo" id="expD16Input">
						  <label class="btn-outline sm" for="expD16Input">정신질환</label>
						</div>									
					</div>	
					
					<p class="info">질환 상태(중증도)를 선택해주세요.(0~3개)</p>
					<div class="form-floating mb-5">
						<div class="form-check form-check-inline">
						  <input class="btn-check " type="checkbox" value="61" name="memberInfo" id="ptLevel1Input">
						  <label class="btn-outline" for="ptLevel1Input">중증</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check " type="checkbox" value="62" name="memberInfo" id="ptLevel2Input">
						  <label class="btn-outline" for="ptLevel2Input">중등증</label>
						</div>
						<div class="form-check form-check-inline">
						  <input class="btn-check " type="checkbox" value="63" name="memberInfo" id="ptLevel3Input">
						  <label class="btn-outline" for="ptLevel3Input">경증</label>
						</div>
					</div>		
					
					<p class="info">키와 몸무게를 각각 입력해주세요</p>
					<p style="font-size:16px; color:red;" class="info">필수 입력사항입니다.</p>
					<div class="form-floating mb-5">
						<div class="row">
						  <div class="col">
						    <input type="text" class="form-control inputCheck" placeholder="키" id="memberInfo" name="ptHeight">
						  </div>
						  <div class="col-md-1" style="font-size: 20px;">cm</div>
						  <div class="col">
						    <input type="text" class="form-control inputCheck" placeholder="몸무게" id="memberInfo" name="ptWeight">
						  </div>
						  <div class="col-md-1" style="font-size: 20px;">kg</div>
						</div>
					</div>
					
					<p class="info">그밖의 정보 또는 간병 관련 요청사항을 100자 이내로 입력해주세요.</p>
					<div class="form-floating mb-5">
						<textarea class="form-control" id="ptRequest" name="ptRequest" rows="3" maxlength="100"></textarea>
						<label for="ptRequest">요청사항(100자 이내)</label>
					</div>																	
				</div>
			</div>
			
			<div class="sns-section d-flex flex-column justify-content-center mt-3 fs-5">
				<p class="text-center">버튼을 누르면<br>회원가입이 완료됩니다.</p>
			</div>
			<div class="sign-btn d-flex flex-column">
				<p class="text-center ifCheck" style="font-size:20px;color:red;"></p>
				<button type="button" class="signIn-btn mt-3" id="nextButton"><span>회원가입</span></button>
			</div>

		</form>
	</main>
	<div class="footer" th:replace="~{common/footer.html :: footer}"></div>
	<script th:inline="javascript" src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script th:inline="javascript">

		
		function sample4_execDaumPostcode() {
	        new daum.Postcode({
	            oncomplete: function(data) {
	                // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
	
	                // 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
	                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
	                var roadAddr = data.roadAddress; // 도로명 주소 변수
	                var extraRoadAddr = ''; // 참고 항목 변수
	
	                // 법정동명이 있을 경우 추가한다. (법정리는 제외)
	                // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
	                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
	                    extraRoadAddr += data.bname;
	                }
	                // 건물명이 있고, 공동주택일 경우 추가한다.
	                if(data.buildingName !== '' && data.apartment === 'Y'){
	                   extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
	                }
	
	                // 우편번호와 주소 정보를 해당 필드에 넣는다.
	                document.getElementById('sample4_postcode').value = data.zonecode;
	                document.getElementById("sample4_roadAddress").value = roadAddr;
	                
	            }
	        }).open();
    	}
		
		
		
		
		
			window.onload=()=>{
			const nextButton = document.getElementById('nextButton');
			const form = document.getElementById('enrollForm');
			const ifCheck = document.querySelector('.ifCheck');
			const inputCheck = document.querySelectorAll('.inputCheck');
			const checkedPtGender = document.querySelector('input[name="ptGender"]:checked');
			const checkedCheckService = document.querySelector('input.checkService:checked');
			
			nextButton.addEventListener('click', ()=>{
				let isValid = true;		
				
				if(!inputCheckFunc(inputCheck)){
					isValid = false;
				}
				if(!checkedPtGender){
					isValid = false;
				}
				if(!checkedCheckService){
					isValid = false;
				}
								
				if(isValid){
					ifCheck.innerText = "";
					form.submit();
				}else if(!isValid){
					ifCheck.innerText = "필수 입력 사항을 빠짐없이 작성해주세요.";
					ifCheck.style.color="red";
				}
									
			});	
		}
						
		function inputCheckFunc(data){ 
			for(const i of data){
				if(i.value.trim() == ''){
					i.focus();
					return false;
				}
			}
			return true;
		};
	
	
	
	
	
	
	
	</script>
		
		
</body>
</html>
